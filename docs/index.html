<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>Home - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="module-files-FileSaveError.html">FileSaveError</a></li></ul><h3>Modules</h3><ul><li><a href="module-files.html">files</a><ul class='methods'><li data-type='method'><a href="module-files.html#.save">save</a></li><li data-type='method'><a href="module-files.html#.send">send</a></li></ul></li><li><a href="module-metadata-helper.html">metadata-helper</a><ul class='methods'><li data-type='method'><a href="module-metadata-helper.html#~getMetadata">getMetadata</a></li><li data-type='method'><a href="module-metadata-helper.html#~handleBinary">handleBinary</a></li><li data-type='method'><a href="module-metadata-helper.html#~handleExcel">handleExcel</a></li><li data-type='method'><a href="module-metadata-helper.html#~handleImage">handleImage</a></li><li data-type='method'><a href="module-metadata-helper.html#~handleMedia">handleMedia</a></li><li data-type='method'><a href="module-metadata-helper.html#~handlePdf">handlePdf</a></li><li data-type='method'><a href="module-metadata-helper.html#~handlePowerPoint">handlePowerPoint</a></li><li data-type='method'><a href="module-metadata-helper.html#~handleText">handleText</a></li><li data-type='method'><a href="module-metadata-helper.html#~handleWord">handleWord</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#Uxio">Uxio</a></li></ul>
    
</nav>

<div id="main">
    

    



    


    <section class="package">
        <h3> </h3>		
    </section>









    



    <section class="readme usertext">
        <article><h1>Uxio.js</h1>
<p>A simple yet powerful Node.js (express.js) middleware, providing backend tools and Optimisazions feature, i.e handling multipart/form-data file uploads with fine-grained control over the saving process and much more other simplified backend tasks.</p>
<p><strong>We are still working on other Web frameworks too, i.e for node, python, ruby and others</strong></p>
<h2>Uxio.js File Upload</h2>
<blockquote>
<p>Uxio decouples file parsing from file saving, allowing you to run custom business logic and validations within your route handlers before committing files to permanent storage.</p>
</blockquote>
<p>Features</p>
<ul>
<li>Two-Stage Process: Separates file parsing (handled by app level middleware) from file saving (explicitly called in the route).</li>
<li>Granular Control: Provides a robust save method that allows for different configurations (validations, paths, renaming) for multiple files in a single request.</li>
<li>Data Integrity: Implements an automatic rollback mechanism that cleans up any partially saved files if an error occurs during the save operation.</li>
<li>Customizable Validation: Easily set maximum file size and allowed MIME types per file.</li>
<li>Dynamic Renaming: Use a custom function to rename files based on their metadata.</li>
<li>Predictable Error Handling: Throws a custom FileSaveError with a status code for consistent error handling.</li>
<li>Flexible Configuration: Use optional flags like <code>required</code> to enforce file presence and <code>makedir</code> to automatically create destination directories.</li>
</ul>
<h3>Installation</h3>
<pre class="prettyprint source lang-bash"><code>npm install uxio
</code></pre>
<p>Usage
First, integrate the Uxio middleware into your Express application. Then, just call the <code>Uxio.files.save()</code> method within your route handlers to process the uploaded files.</p>
<pre class="prettyprint source lang-javascript"><code>const Uxio = require('uxio')
// in your app level server.js just before any middle to ensure it capture every http-request first
app.use(Uxio()); // This will capture all multipart/form-data and parse it, passing the file(s) object to req.uxio

// in your routes handlers you can just
const uxio = req.uxio; // This will hold the file(s) object
const savedFiles = await Uxio.files.save({
   filename: 'avatar', // specify the field name(s) you want to upload if multiple files have same field name(s), all will be saved at once
   path: path.join(__dirname, 'uploads'),  // sepecify save destination
   rename: (file) => `${Date.now()}${path.extname(file.filename)}`, // This allows to apply renaming function to your saved file(s)
   Validations: {
      mimeType: ['image/png', 'audio/mp3'], //filter with mimetypes, can be a string or an array of valid mimetypes | default is all types
      size: 5*1024*1024, // 5MB | filter with size 
   },
   makedir: true, // don't throw an error if path doesn't exist, create the path recursively
   required: true // All the specified filename should be present | if false (default) it won't throw error if fieldname name is not found will just skip saving to another file
}, uxio);
</code></pre>
<h4>Passing an array of config objects</h4>
<pre class="prettyprint source lang-javascript"><code>const fileInfo = await Uxio.files.save([{/* options */}, {/* options */}], uxio) // you can use this to handle different fields with custom path, Validations etc
</code></pre>
<h3>API Reference</h3>
<ul>
<li>Uxio(options) Middleware
The middleware parses multipart/form-data and attaches a req.uxio object to the request. It caches all files to a temporary directory.
<code>req.uxio Object</code></li>
</ul>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>files</td>
<td>array</td>
<td>An array of objects, where each object contains metadata for a cached file.</td>
</tr>
<tr>
<td>hasFile</td>
<td>boolean</td>
<td>A getter that returns true if any file was uploaded.</td>
</tr>
<tr>
<td>hasFiles</td>
<td>function</td>
<td>Checks if one or more files with the specified fieldname(s) were uploaded.</td>
</tr>
<tr>
<td>cleanup</td>
<td>function</td>
<td>A method to manually clean up the temporary cache directory. (Called automatically on res.finish or res.close).</td>
</tr>
</tbody>
</table>
<h3>The <code>Uxio.files.save(config, uxioObject)</code> method</h3>
<p>This is the main function for saving form uploaded file(s) to their disired final destination.
Parameters</p>
<ul>
<li>config: object or array of object. The configuration(s) for saving files.</li>
<li>uxioObject: object. The req.uxio object from the middleware.</li>
</ul>
<p>Configuration Object Properties</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>filename</td>
<td>string or string[]</td>
<td>Yes</td>
<td>The fieldname of the file(s) to save.</td>
</tr>
<tr>
<td>path</td>
<td>string</td>
<td>Yes</td>
<td>The destination directory path to save the files.</td>
</tr>
<tr>
<td>required</td>
<td>boolean</td>
<td>No</td>
<td>If true, an error will be thrown if no files match the filename. Defaults to false.</td>
</tr>
<tr>
<td>makedir</td>
<td>boolean</td>
<td>No</td>
<td>If true, the path directory will be created recursively if it doesn't exist. Defaults to false.</td>
</tr>
<tr>
<td>validations</td>
<td>object</td>
<td>No</td>
<td>An object for validation rules.</td>
</tr>
<tr>
<td>validations.maxSize</td>
<td>number</td>
<td>No</td>
<td>Maximum file size in bytes.</td>
</tr>
<tr>
<td>validations.mimeType</td>
<td>string or string[]</td>
<td>No</td>
<td>Allowed MIME types (e.g., ['image/jpeg', 'image/png']).</td>
</tr>
<tr>
<td>rename</td>
<td>function</td>
<td>No</td>
<td>A function (file) =&gt; newFilename to rename the file. Defaults to using the original filename.</td>
</tr>
</tbody>
</table>
<p>Returns
A Promise that resolves to an array of objects, each containing metadata for a successfully saved file.</p>
<p>Error Handling
This library throws a custom FileSaveError class with a status property. This allows for specific error handling in routes.</p>
<pre class="prettyprint source lang-javascript"><code>try {
   await Uxio.files.save(...);
} catch (e) {
   if (e.status === 404) {
      // Directory not found or required file is missing
   } else if (e.status === 400) {
      // Validation error (size or type)
   }
   res.status(e.status || 500).json({ error: e.message });
}

</code></pre>
<h3>The <code>Uxio.files.send(config, uxioObject)</code> method</h3>
<p>This function sends multipart/form-data uploaded to an external destination over a network, such as cloud storage or a custom server.
For now it supports <code>s3</code> and <code>customHttp</code> services, we are still working to build up other cloud service supports</p>
<p>Note: Yet we still don't recommend you using this method for production until you(we) pass it  approved, verified and secured, it is still under development, so walk with cautions</p>
<p>Parameters</p>
<ul>
<li>config: object | object[]. The configuration(s) for sending files.</li>
<li>uxioObject: object. The req.uxio object from the middleware.</li>
</ul>
<p>Configuration Object Properties</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>filename</td>
<td>string | string[]</td>
<td>Yes</td>
<td>The fieldname of the file(s) to send.</td>
</tr>
<tr>
<td>provider</td>
<td>string</td>
<td>Yes</td>
<td>The destination service provider. Supported values: 's3', 'customHttp'.</td>
</tr>
<tr>
<td>options</td>
<td>object</td>
<td>Yes</td>
<td>Provider-specific options. See details below.</td>
</tr>
<tr>
<td>required</td>
<td>boolean</td>
<td>No</td>
<td>If true, an error is thrown if no files match the filename. Defaults to false.</td>
</tr>
<tr>
<td>validations</td>
<td>object</td>
<td>No</td>
<td>An object for validation rules (same as save).</td>
</tr>
<tr>
<td>rename</td>
<td>function</td>
<td>No</td>
<td>A function (file) =&gt; newFilename to rename the file before sending.</td>
</tr>
</tbody>
</table>
<h4>Provider options Details</h4>
<ul>
<li>For provider: <code>'s3'</code>:
<ul>
<li><code>options.bucket</code>: (string) The name of your S3 bucket.</li>
<li><code>options.region</code>: (string) The AWS region of your bucket (e.g., 'us-east-1').</li>
<li><code>options.credentials</code>: (object) Your AWS credentials <code>({ accessKeyId, secretAccessKey })</code>.</li>
</ul>
</li>
<li>For provider: <code>'customHttp'</code>:
<ul>
<li><code>options.url</code>: (string) The full URL of the endpoint that will receive the file.</li>
<li><code>options.axiosConfig</code>: (object, optional) A standard Axios config object for custom headers, etc. <strong>You might pass through axios documentations to understand these</strong></li>
</ul>
</li>
</ul>
<p>Returns
A Promise that resolves to an array of objects, each containing metadata from the external provider's response (e.g., S3 object URL, key, bucket).</p>
<ul>
<li>The response information might differ or depend on Configuration(s) or the way way the services handle the sent file, if well configured can return back a full enough file(s) info</li>
</ul>
<p>Error Handling
Both save and send methods throw a custom <code>FileSaveError</code> class with a status property. This allows for specific and consistent error handling in your routes.</p></article>
    </section>









<section>

<header>
    
        <h2>
        
            index.js
        
        </h2>
        
    
</header>

<article>
    
        <div class="container-overview">
        
            

<dl class="details">
    
    <dt class="tag-description">Description:</dt>
    <dd class="tag-description"><ul class="dummy"><li>The index is the entry for the library, provide the Uxio middleware and hence APIs.</li></ul></dd>
    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="index.js.html">index.js</a>, <a href="index.js.html#line3">line 3</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    
    <dt class="tag-author">Author:</dt>
    <dd class="tag-author">
        <ul>
            <li>godieGH</li>
        </ul>
    </dd>
    

    

    
    <dt class="tag-license">License:</dt>
    <dd class="tag-license"><ul class="dummy"><li>MIT</li></ul></dd>
    

    

    

    

    
</dl>




            
                <div class="description usertext">The index is the entry for the library, provide the Uxio middleware and hence APIs.</div>
            

            
        
        </div>
    

    

    

    
    
    

     

    

    

    

    

    
</article>

</section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.4</a> on Fri Aug 15 2025 08:07:58 GMT+0300 (East Africa Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>